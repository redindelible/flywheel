
define %collatz (int) int {
@entry [int %n]
    load.local %n
    load.int 1
    le
    branch @base @rec
@base [int %n]
    load.int 0
    ret
@rec [int %n]
    load.local %n
    load.int 2
    mod
    load.int 0
    eq
    branch @even @off
@even [int %n]
    load.const %collatz
    load.local %n
    load.int 2
    div
    call 1
    load.int 1
    add
    ret
@odd [int %n]
    load.const %collatz
    load.int 3
    load.local %n
    mul
    load.int 1
    add
    call 1
    load.int 1
    add
    ret
}